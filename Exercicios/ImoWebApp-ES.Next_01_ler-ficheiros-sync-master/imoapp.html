<!DOCTYPE html>
<html>

	<head>
		<title>ImoWebApp-ES.Next_01_ler-ficheiros-sync</title>
		<link rel="stylesheet" href="estilo.css" />
		<meta charset="UTF-8">
		<!-- start -->
		<script type="module">
			import { Visitante } from "./codificator.io.js";
			window.imoApp= new Visitante().imoGUI.imoApp; // disponibiliza a app globalmente sob o nome "visitante" (p.ex. na consola, para testá-la)
		</script>
	</head>

	<body>
		<h2>ImoWebApp-ES.Next_01_ler-ficheiros-sync</h2>
		<article>
			<header>
				<h3>Intro</h3>
			</header>
			<p>
				Esta app e a versão web de ImoApp: recorre às <span class="quadro">livrarias "http" e "fs" de NodeJS</span> para lançar um servidor web e servir páginas HTML, CSS e JS.
			</p>
			<p>
				A app vem <span>preparada para Node</span> (testada com Node versão 12) ,com os ficheiros de "lançamento" package.json e Executar.js.
				Executar.js<span class="quadro"> instanciará a ImoWebApp</span>, que por sua vez <span class="quadro">instanciará a ImoApp</span>, a coleção de Imóveis e Clientes.
			</p>
			<code>
				// Executar na consola, no diretório do ficheiro Executar.js:
			</code>
			<code>
				> node Executar.js
			</code>
			<p>Pode ainda fazer o debugging desta webapp, p.ex. com Visual Studio Code: abrir o "folder", colocar breakpoints no código fonte e carregar em F5.</p>
		</article>
		<article>
			<header>
				<h3>Procurar em coleções</h3>
				<p>NOTA: nesta versão a GUI ainda interage com <span>uma instância da ImoApp no navegador</span> (apesar de também haver uma instância no servidor).</p>
			</header>
			<section id="botões">
				<p>Esta página vem com botões que permitem rapidamente testar a app (dispensa de dever preencher um formulário).</p>
				<button id="cidade" value="Lisboa,,">
					Procurar imóveis em Lisboa<br />
					<span class="info">&lt;button id="cidade" value="Lisboa,,"></span>
				</button>
				<button id="valorMáximo" value=",100000,">
					Procurar imóveis < €100.000<br />
					<span class="info">&lt;button id="valorMáximo" value=",100000,"></span>
				</button>
				<button id="cidadeValorMínimo" value="Porto,100000,false">
					Procurar imóveis no Porto e > €100.000<br />
					<span class="info">&lt;button id="cidade" value="Porto,100000,false"></span>
				</button>
				<p>O botão seguinte permite procurar imóveis à volta de certas coordenadas.</p>
				<button id="distância" value="10,38.71,-9.16">
					Procurar imóveis na área de 10km das coordenadas  (38.71, -9.16) <br />
					<span class="info">&lt;button id="distância" value="10,38.71,-9.16"></span>
				</button>
			</section>
		</article>
		<article>
			<header>
				<h3>Imóveis encontrados</h3>
			</header>
			<table>
				<thead>
				<th>Cidade</th>
				<th>Coordenadas</th>
				<th>€</th>
				</thead>
				<tbody id="imóveis"></tbody>
				<!-- resultados -->
			</table>
		</article>

		<article id="tópicos">
			<header>
				<h3>Novos conceitos, palavras chave, síntaxe e/ou APIs de JavaScript abordados/introduzidos <span class="quadro">neste exemplo</span></h3>
			</header>
			<section id="conceitos">
				<p>Conceitos</p>
				<ul>
					<li>Uso de bibliotecas suplementares (além das bibliotecas inerentes a JavaScript)</li>
					<li>Distinguir entre bibliotecas suplementares no navegador e no servidor</li>
					<li>Bibliotecas no navegador servem para melhorar a experiência do visitante da página web</li>
					<li>Bibliotecas no servidor para facilitar o serviço que o servidor está prestando</li>
					<li>Distinguir entre <span class="keyword">import</span> de bibliotecas ou ficheiros</li>
					<li><a href="https://tools.ietf.org/html/rfc2616" target="_blank">HTTP</a></li>
					<li><a href="https://tools.ietf.org/html/rfc2045" target="_blank">MIME</a></li>
				</ul>
			</section>
			<section id="APIs">
				<p>APIs ("Application Programming Interface")</p>
				<ul>
					<li>decodeURI() (JavaScript função global)</li>
					<li>fs (<a href="https://nodejs.org/dist/latest-v12.x/docs/api/fs.html" target="_blank">Node File System</a>)</li>
					<li>fs.readFileSync()</li>
					<li>http (<a href="https://nodejs.org/dist/latest-v12.x/docs/api/http.html" target="_blank">Node HTTP</a>)</li>
					<li>http.createServer()</li>
					<li>http.IncomingMessage</li>
					<li>http.IncomingMessage.url</li>
					<li>http.ServerResponse</li>
					<li>http.ServerResponse.statusCode</li>
					<li>http.ServerResponse.setHeader()</li>
					<li>http.ServerResponse.end()</li>
				</ul>
			</section>
			<section id="palavras">
				<p>Palavras chave</p>
				<ul>
					<li>"import {} from" vs "import from"</li>
					<li>from "ficheiro" vs from "biblioteca"</li>
				</ul>
			</section>
			<section id="síntaxe">
				<p>Síntaxe</p>
				<ul>
					<li></li>
				</ul>
			</section>
		</article>

	</body>
</html>