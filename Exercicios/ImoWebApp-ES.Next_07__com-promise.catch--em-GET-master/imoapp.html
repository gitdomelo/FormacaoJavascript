<!DOCTYPE html>
<html>

	<head>
		<title>ImoWebApp-ES.Next_07__com-promise.catch()-em-GET</title>
		<link rel="stylesheet" href="estilo.css" />
		<meta charset="UTF-8">
		<script type="module">
			import { Visitante } from "./codificator.io.js";
			window.imoApp= new Visitante().imoGUI.imoApp; // disponibiliza a app globalmente sob o nome "visitante" (p.ex. na consola, para testá-la)
		</script>
	</head>

	<body>
		<h2>ImoWebApp-ES.Next_07__com-promise.catch()-em-GET</h2>
		<article>
			<header>
				<h3>Intro · ImoWebApp · Versão distribuída da ImoApp</h3>
			</header>
			<p>
				Esta versão informa o utilizador sobre <span class="quadro">erros que podem acontecer</span> se páginas erradas são requisitadas ao servidor.
				Recorre ao uso do método <span class="quadro">Promise.prototype.catch()</span> em vez de à síntaxe das palavras chave <span class="keyword">try</span> e <span class="keyword">catch</span>.
			</p>
			<ul>
				<li>Recorre às livrarias "http" e "fs" de NodeJS para lançar um servidor web e servir <span>páginas HTML, CSS, JS, PNG e JSON.</span></li>
				<li>A webapp distingue entre pedidos GET ou POST para poder <span>servir páginas ou objetos</span> (imóveis).</li>
				<li>A procura de imóveis é iniciada no navegador e executada no servidor.</li>
				<li>A comunicação entre o navegador e o servidor é feita com objetos <span>JSON</span>.</li>
			</ul>
			<code>
				// Executar na consola, no diretório do ficheiro Executar.js:
			</code>
			<code>
				> node Executar.js
			</code>
			<p><a href="http://localhost:8888/imoapp.html">Visite a homepage</a> ou teste a app requisitando <a href="chocolate.html">uma página não existente</a>.</p>
		</article>
		<article>
			<header>
				<h3>Procurar em coleções</h3>
				<p>
					A GUI ainda interage com <span>um "stub" da ImoApp</span> no navegador.
					O "stub" é uma class que invocará a imoApp no servidor com os critérios da procura.
				</p>
			</header>
			<section>
				<p>
					Esta página vem com botões que permitem rapidamente testar a app (dispensa de dever preencher um
					formulário).
				</p>
				<button id="cidade" value="Lisboa,,">
					Procurar imóveis em Lisboa<br />
					<span class="info">&lt;button id="cidade" value="Lisboa,,"></span>
				</button>
				<button id="valorMáximo" value=",100000,">
					Procurar imóveis &lt; €100.000<br />
					<span class="info">&lt;button id="valorMáximo" value=",100000,"></span>
				</button>
				<button id="cidadeValorMínimo" value="Porto,100000,false">
					Procurar imóveis no Porto e > €100.000<br />
					<span class="info">&lt;button id="cidade" value="Porto,100000,false"></span>
				</button>
			</section>
		</article>
		<article>
			<header>
				<h3>Imóveis encontrados</h3>
			</header>
			<table>
				<thead>
				<th>Cidade</th>
				<th>Coordenadas</th>
				<th>€</th>
				</thead>
				<tbody id="imóveis"></tbody>
				<!-- resultados -->
			</table>
		</article>

		<article id="tópicos">
			<header>
				<h3>Novos conceitos, palavras chave, síntaxe e/ou APIs de JavaScript abordados/introduzidos <span class="quadro">neste exemplo</span></h3>
			</header>
			<section id="conceitos">
				<p>Conceitos</p>
				<ul>
					<li>Registo de "event listeners" para serem executados se durante a resolução de uma Promise um erro for "thrown"</li>
					<li>Precarregamento de recursos web para aumentar a eficácia</li>
				</ul>
			</section>
			<section id="APIs">
				<p>APIs ("Application Programming Interface"</p>
				<ul>
					<li>Promise.catch() </li>
					<li>Promise.resolve() (p.ex. pode ser utilizado pelo "event listener" em Promise.catch() )</li>
					<li>String.replace() (para tornar a página de Erro mais compreensível)</li>
				</ul>
			</section>
			<section id="palavras">
				<p>Palavras chave</p>
				<ul>
					<li></li>
				</ul>
			</section>
			<section id="síntaxe">
				<p>Síntaxe</p>
				<ul>
					<li></li>
				</ul>
			</section>
		</article>

	</body>
</html>