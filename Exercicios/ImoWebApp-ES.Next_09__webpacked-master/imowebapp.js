!function(t){var r={};function e(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=t,e.c=r,e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var n in t)e.d(i,n,function(r){return t[r]}.bind(null,n));return i},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=0)}([function(t,r,e){"use strict";e.r(r);class i{constructor(t){this.imoApp=t,this.imoApp.registar(this),this.imóveis=document.getElementById("imóveis"),document.getElementById("inexistentes").addEventListener("click",this.procurar.bind(this),!0),document.getElementById("cidade").addEventListener("click",this.procurar.bind(this),!0),document.getElementById("valorMáximo").addEventListener("click",this.procurar.bind(this),!0),document.getElementById("cidadeValorMínimo").addEventListener("click",this.procurar.bind(this),!0)}procurar(t){t.stopPropagation();const r=new o(t.currentTarget.value.split(","));this.imoApp.procurar(r)}avisar(t){switch(t.tipo){case n.IMÓVEIS_ENCONTRADOS:this.visualizar(t.carga);break;case n.SEM_IMÓVEIS:this.imóveis.innerHTML=`<tr><td>${t.carga}</td></tr>`;break;default:console.log(t.tipo.toString())}}visualizar(t){this.imóveis.innerHTML="";for(var r=0;r<t.length;r++)this.imóveis.appendChild(t[r].criarTR())}}class n{constructor(t,r){this.tipo=t,this.carga=r}}n.IMÓVEIS_ENCONTRADOS={toString:function(){return"IMÓVEIS_ENCONTRADOS"}},n.IMÓVEL_NOVO={toString:function(){return"IMÓVEL_NOVO"}},n.SEM_IMÓVEIS={toString:function(){return"SEM_IMÓVEIS"}};class o{constructor(t){var[r,e,i]=t;e=parseInt(e),i=""===i||JSON.parse(i),this.lambda=t=>!(Boolean(r)&&t.cidade!==r||Boolean(e)&&!(i?t.preço<e:t.preço>=e)),this.cidade=r,this.preço=e,this.inferior=i}toString(){return this.constructor.name+`{${this.cidade}, ${this.preço}, ${this.inferior?"inferior":"superior"}}`}}o.restituir=t=>new o(Object.values(t));class s{constructor(t,r,e,i){this.cidade=t,this.coordenadas=new a(r,e),this.preço=i}"naÁrea"(t,r){return this.coordenadas.naÁrea(t,r)}criarTR(){var t,r=document.createElement("tr");for(var e in this)void 0===this[e]||this[e]instanceof Function||((t=document.createElement("td")).innerHTML=this[e],r.appendChild(t));return r}static restituir(t){return new s(t.cidade,t.coordenadas.x,t.coordenadas.y,t.preço)}}class a{constructor(t,r){this.x=t,this.y=r}toString(){return"Coordenadas ("+this.x+", "+this.y+")"}"naÁrea"(t,r){var e=r*a.km;return Math.abs(this.x-t.x)<=e&&Math.abs(this.y-t.y)<=e}}a.km=.009;window.imoApp=(new class{constructor(){this.imoGUI=new i(new class{constructor(){this.terceiros=[],this.encontrados=[]}async procurar(t){t=JSON.stringify(t);let r=await fetch("/procurar",{method:"POST",body:t});r=await r.json(),this.encontrados=[];try{r.forEach(t=>this.encontrados.push(s.restituir(t))),this.avisar(new n(n.IMÓVEIS_ENCONTRADOS,this.encontrados))}catch(t){const e=o.restituir(r.predicado),i=(t,e)=>{const i=e.cidade?` em ${e.cidade}`:"",n=e.preço?` pelo valor ${e.inferior?"inferior":"superior"} a ${e.preço}`:"";return r.mensagem+i+n};this.avisar(new n(n.SEM_IMÓVEIS,i`${e}`))}}registar(t){this.terceiros.push(t)}avisar(t){for(var r=0;r<this.terceiros.length;r++)this.terceiros[r].avisar(t)}})}}).imoGUI.imoApp,window.Predicado=o}]);